import{a as f}from"./channelHandler-2802c793.js";import{S as v,g as k,a as y,b as h,c as S,d as b}from"./setPicker-5b7de66c.js";import{_ as F}from"./FancySpinner.vue_vue_type_style_index_0_lang-48428fc4.js";import{d as V,w as C,r as _,k as x,q as E,o as l,c,b as L,u as d,a as O,F as R,e as B,s as G}from"./index-ad126b29.js";const I={id:"preload-zone"},N=["src"],M=V({__name:"ObsSourceView",async setup(A){let t,u;const a=new v(([t,u]=C(()=>k()),t=await t,u(),t)),r=_(localStorage.getItem("pickFilter")??"all");window.addEventListener("storage",e=>{e.key==="pickFilter"&&(r.value=e.newValue??"all")}),x(()=>r.value,async()=>{const e={all:h,lastevo:S,base:b}[r.value],n=await(e==null?void 0:e())??[];console.log(n),a.changeSubset(n),i(localStorage.getItem("picker"))},{immediate:!0});function i(e){a.import(new Set(JSON.parse(e??"[]")))}i(localStorage.getItem("picker")),window.addEventListener("storage",e=>{e.key==="picker"&&i(e.newValue)});const p=_(null);class g extends f{received(n){switch(super.received(n),n.type){case"spin":p.value.start();break}}}const m=new g;function o(){m.close()}window.addEventListener("beforeunload",o),E(()=>{window.removeEventListener("beforeunload",o),o()});function w(e){m.broadcast("finished",G(e))}return(e,n)=>(l(),c("main",null,[L(F,{ref_key:"spinner",ref:p,picker:d(a),"model-value":void 0,"onUpdate:modelValue":w},null,8,["picker"]),O("div",I,[(l(!0),c(R,null,B(d(a).subset,s=>(l(),c("img",{key:s.id,src:d(y)(s.id,s.sprite.gen,s.sprite.shiny)},null,8,N))),128))])]))}});export{M as default};
